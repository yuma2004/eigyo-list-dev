# å–¶æ¥­ãƒªã‚¹ãƒˆä½œæˆãƒ„ãƒ¼ãƒ« - ãƒ†ã‚¹ãƒˆä»•æ§˜æ›¸

## ğŸ“‹ æ¦‚è¦

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯TDDï¼ˆTest-Driven Developmentï¼‰æ‰‹æ³•ã«å¾“ã£ã¦é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

## ğŸ¯ TDDå®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 1-6: å®Œäº†æ¸ˆã¿ âœ…
- Phase 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­è¨ˆãƒ»è¦ä»¶å®šç¾©
- Phase 2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãƒ»ãƒ¢ãƒ‡ãƒ«å®šç¾©
- Phase 3: ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…ï¼ˆRed-Green-Refactorï¼‰
- Phase 4: FastAPI ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…
- Phase 5: React ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰åŸºç›¤
- Phase 6: UIå®Ÿè£…ï¼ˆå…¨ãƒšãƒ¼ã‚¸å®Œæˆï¼‰

### Phase 7: çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè£… ğŸš€
**ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚º - TDDæ‰‹æ³•ã§åŒ…æ‹¬çš„ãªçµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…**

## ğŸ§ª ãƒ†ã‚¹ãƒˆæ§‹æˆ

### 1. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- **å ´æ‰€**: `backend/tests/test_*.py`, `frontend/src/**/*.test.tsx`
- **å¯¾è±¡**: å€‹åˆ¥é–¢æ•°ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å˜ä½“ãƒ†ã‚¹ãƒˆ
- **ãƒ„ãƒ¼ãƒ«**: pytest (Backend), Vitest (Frontend)

### 2. çµ±åˆãƒ†ã‚¹ãƒˆ
- **å ´æ‰€**: `backend/tests/test_integration_*.py`, `frontend/src/__tests__/integration/`
- **å¯¾è±¡**: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“é€£æºã€APIçµ±åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- **ãƒ„ãƒ¼ãƒ«**: pytest + httpx (Backend), React Testing Library (Frontend)

### 3. ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
- **å ´æ‰€**: `frontend/src/__tests__/e2e/`
- **å¯¾è±¡**: ãƒ–ãƒ©ã‚¦ã‚¶ãƒ™ãƒ¼ã‚¹ã®å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ
- **ãƒ„ãƒ¼ãƒ«**: Playwright

### 4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- **å ´æ‰€**: `backend/tests/test_performance_*.py`
- **å¯¾è±¡**: ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°æ€§èƒ½ã€å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã€ä¸¦è¡Œå‡¦ç†
- **ãƒ„ãƒ¼ãƒ«**: pytest + psutil

## ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•

### ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ
```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
./run_tests.sh

# å€‹åˆ¥å®Ÿè¡Œ
./run_tests.sh backend    # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã¿
./run_tests.sh frontend   # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã¿
./run_tests.sh e2e        # E2Eãƒ†ã‚¹ãƒˆã®ã¿
```

### è©³ç´°ã‚³ãƒãƒ³ãƒ‰

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
```bash
cd backend

# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
poetry run pytest tests/test_*.py -v --cov=app

# çµ±åˆãƒ†ã‚¹ãƒˆ
poetry run pytest tests/test_integration_*.py -v

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
poetry run pytest tests/test_performance_*.py -v

# ç‰¹å®šãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹
poetry run pytest tests/test_integration_api.py::TestCompaniesIntegration -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
poetry run pytest --cov=app --cov-report=html
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
```bash
cd frontend

# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãå®Ÿè¡Œ
npm run test:coverage

# çµ±åˆãƒ†ã‚¹ãƒˆ
npm run test:integration

# ç›£è¦–ãƒ¢ãƒ¼ãƒ‰
npm run test:watch

# ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«
npm run test CompaniesList.test.tsx
```

#### E2Eãƒ†ã‚¹ãƒˆ
```bash
cd frontend

# ãƒ–ãƒ©ã‚¦ã‚¶ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx playwright install

# E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:e2e

# ãƒ˜ãƒƒãƒ‰ãƒ•ãƒ«ãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶è¡¨ç¤ºï¼‰
npx playwright test --headed

# ç‰¹å®šãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿
npx playwright test --project=chromium

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
npx playwright test --debug
```

## ğŸ“Š ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

- **Backend**: 80%ä»¥ä¸Š
- **Frontend**: 80%ä»¥ä¸Š
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ä¸»è¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼100%ã‚«ãƒãƒ¼
- **E2Eãƒ†ã‚¹ãƒˆ**: ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹100%ã‚«ãƒãƒ¼

## ğŸ” ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ

ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã€ä»¥ä¸‹ã®å ´æ‰€ã«ãƒ¬ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã™ï¼š

```
reports/
â”œâ”€â”€ backend-coverage/          # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ frontend-coverage/         # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ playwright-report/         # E2Eãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â””â”€â”€ index.html
â””â”€â”€ e2e-results/              # E2Eãƒ†ã‚¹ãƒˆè©³ç´°çµæœ
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªè©³ç´°

### çµ±åˆãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

#### 1. å®Œå…¨ãªå–¶æ¥­æ´»å‹•ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
```
ãƒ‡ãƒ¼ã‚¿åé›† â†’ ä¼æ¥­ç®¡ç† â†’ å–¶æ¥­ç®¡ç† â†’ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
```
- ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°è¨­å®šãƒ»å®Ÿè¡Œ
- ä¼æ¥­ãƒ‡ãƒ¼ã‚¿ç¢ºèªãƒ»ç·¨é›†
- å–¶æ¥­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ï¼ˆæœªç€æ‰‹â†’ã‚¢ãƒ—ãƒ­ãƒ¼ãƒä¸­â†’å•†è«‡ä¸­â†’æˆç´„ï¼‰
- CSV/Excelã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

#### 2. ä¼æ¥­CRUDæ“ä½œãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- ä¼æ¥­æ–°è¦ç™»éŒ²
- ä¸€è¦§è¡¨ç¤ºãƒ»æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- è©³ç´°è¡¨ç¤ºãƒ»ç·¨é›†
- å‰Šé™¤æ©Ÿèƒ½

#### 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚·ãƒŠãƒªã‚ª
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼
- APIã‚¨ãƒ©ãƒ¼ï¼ˆ400, 401, 404, 500ãªã©ï¼‰
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
- åŒæ™‚æ“ä½œãƒ»ç«¶åˆçŠ¶æ…‹

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

#### 1. ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°æ€§èƒ½
- ä¸¦è¡Œå‡¦ç†æ€§èƒ½
- å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†ï¼ˆ1000ä»¶ï¼‰
- ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯æ¤œå‡º
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ

#### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ€§èƒ½
- å¤§é‡ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥
- è¤‡é›‘ã‚¯ã‚¨ãƒªæ€§èƒ½
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ€§èƒ½

#### 3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ€§èƒ½
- å¤§é‡ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
- ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°

## ğŸ› ãƒ†ã‚¹ãƒˆãƒ‡ãƒãƒƒã‚°

### Backend
```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
poetry run pytest tests/test_integration_api.py -v -s --pdb

# ãƒ­ã‚°å‡ºåŠ›
poetry run pytest tests/ -v --log-cli-level=DEBUG

# ç‰¹å®šãƒ†ã‚¹ãƒˆã®ã¿
poetry run pytest tests/test_integration_api.py::TestCompaniesIntegration::test_complete_company_crud_workflow -v -s
```

### Frontend
```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
npm run test -- --reporter=verbose

# ç‰¹å®šãƒ†ã‚¹ãƒˆ
npm run test -- UserWorkflows.test.tsx

# UIãƒ¢ãƒ¼ãƒ‰
npm run test:ui
```

### E2E
```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
npx playwright test --debug

# ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œ
npx playwright test --headed --slowMo=1000

# ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãƒ»å‹•ç”»
npx playwright test --screenshot=only-on-failure --video=retain-on-failure
```

## ğŸ”§ CI/CDçµ±åˆ

GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒè¨­å®šæ¸ˆã¿ï¼ˆ`.github/workflows/ci.yml`ï¼‰ï¼š

### è‡ªå‹•å®Ÿè¡Œãƒˆãƒªã‚¬ãƒ¼
- Push to master/develop
- Pull Request
- å¤œé–“å®Ÿè¡Œï¼ˆæ¯æ—¥åˆå‰2æ™‚UTCï¼‰

### å®Ÿè¡Œå†…å®¹
1. Backend Testsï¼ˆpytestï¼‰
2. Frontend Testsï¼ˆvitestï¼‰
3. E2E Testsï¼ˆplaywrightï¼‰
4. Security Scanï¼ˆTrivyï¼‰
5. Code Qualityï¼ˆSonarQubeï¼‰
6. Deployï¼ˆmaster branch onlyï¼‰

## ğŸ“‹ ãƒ†ã‚¹ãƒˆç’°å¢ƒ

### å¿…è¦ãªç’°å¢ƒ
- Python 3.11+
- Node.js 18+
- Poetry 1.7+
- PostgreSQL 15ï¼ˆæœ¬ç•ªãƒ»ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ï¼‰
- SQLiteï¼ˆãƒ†ã‚¹ãƒˆï¼‰

### ç’°å¢ƒå¤‰æ•°
```bash
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚
export TESTING=true
export DATABASE_URL="sqlite:///./test.db"
export VITE_API_BASE_URL="http://localhost:8000"
```

## ğŸš¨ ãƒ†ã‚¹ãƒˆå¤±æ•—æ™‚ã®å¯¾å¿œ

### 1. Backend ãƒ†ã‚¹ãƒˆå¤±æ•—
```bash
# è©³ç´°ãƒ­ã‚°ç¢ºèª
poetry run pytest tests/ -v --tb=long

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ
rm -f test.db
poetry run pytest tests/ --create-db

# ä¾å­˜é–¢ä¿‚æ›´æ–°
poetry update
```

### 2. Frontend ãƒ†ã‚¹ãƒˆå¤±æ•—
```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
npm run test -- --clearCache

# ä¾å­˜é–¢ä¿‚å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf node_modules package-lock.json
npm install

# ãƒ¢ãƒƒã‚¯ç¢ºèª
npm run test -- --verbose
```

### 3. E2E ãƒ†ã‚¹ãƒˆå¤±æ•—
```bash
# ãƒ–ãƒ©ã‚¦ã‚¶å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx playwright install --force

# ãƒ˜ãƒƒãƒ‰ãƒ•ãƒ«ãƒ¢ãƒ¼ãƒ‰ã§ç¢ºèª
npx playwright test --headed

# ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆç¢ºèª
open test-results/
```

## ğŸ“ˆ ç¶™ç¶šçš„æ”¹å–„

### ãƒ†ã‚¹ãƒˆå“è³ªå‘ä¸Šã®ãŸã‚ã«
1. **ã‚«ãƒãƒ¬ãƒƒã‚¸ç›£è¦–**: 80%ä»¥ä¸Šã‚’ç¶­æŒ
2. **ãƒ†ã‚¹ãƒˆé€Ÿåº¦**: å…¨ãƒ†ã‚¹ãƒˆ5åˆ†ä»¥å†…
3. **ãƒ•ãƒ¬ãƒ¼ã‚­ãƒ¼ãƒ†ã‚¹ãƒˆ**: å®šæœŸçš„ãªæ¤œå‡ºãƒ»ä¿®æ­£
4. **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿**: æœ¬ç•ªã«è¿‘ã„ãƒªã‚¢ãƒ«ãªãƒ‡ãƒ¼ã‚¿ä½¿ç”¨

### ä»Šå¾Œã®æ‹¡å¼µäºˆå®š
- Visual Regression Testing
- API Contract Testing
- Load Testing
- Accessibility Testing

## ğŸ’¡ Tips

### åŠ¹ç‡çš„ãªãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
# å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
git diff --name-only | grep -E '\.(py|tsx?)$' | xargs pytest/npm test

# ä¸¦åˆ—å®Ÿè¡Œ
poetry run pytest -n auto
npm run test -- --parallel

# ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚£ãƒ«ã‚¿
poetry run pytest -k "test_company"
npm run test -- --grep="company"
```

### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†
- ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã®æ´»ç”¨
- ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹

---

**ğŸ‰ Phase 7 çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè£…å®Œäº†ï¼**

TDDæ‰‹æ³•ã«å¾“ã£ã¦åŒ…æ‹¬çš„ãªçµ±åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆãŒå®Ÿè£…ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å–¶æ¥­ãƒªã‚¹ãƒˆä½œæˆãƒ„ãƒ¼ãƒ«ã®å“è³ªã¨ä¿¡é ¼æ€§ãŒå¤§å¹…ã«å‘ä¸Šã—ã¦ã„ã¾ã™ã€‚